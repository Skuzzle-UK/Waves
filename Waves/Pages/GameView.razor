@using RazorConsole.Components
@using Waves.Core.Enums

<Panel Border="Spectre.Console.BoxBorder.Double" BorderColor="Spectre.Console.Color.DarkSeaGreen">
    <Grid>
        <Align Horizontal="@Spectre.Console.HorizontalAlignment.Left">
            <Markup Foreground="_healthBarColour" Content="@GetHealthBar()" />

        </Align>
        <Align Horizontal="@Spectre.Console.HorizontalAlignment.Right">
            <Markup Content="@($"{GameManager.Score} : SCORE")" />
        </Align>
    </Grid>
</Panel>

@{
    var content = GetRenderedContent();
    var lines = content.Split(new[] { "\r\n", "\n" }, StringSplitOptions.None);
}

@if (GameManager.CurrentGameState == GameStates.PAUSED)
{
    @if (_showSettings)
    {
        <SettingsView @ref="_settingsView" OnVisibilityChanged="OnSettingsVisibilityChanged" />
    }
    else
    {
        <Padder Padding="@(new(0, 0, 0, 0))" />
        <Align Horizontal="@Spectre.Console.HorizontalAlignment.Center">
            <Panel Border="Spectre.Console.BoxBorder.Double" BorderColor="Spectre.Console.Color.Yellow">
                <Padder Padding="@(new(1, 0, 1, 0))">
                    <Rows>
                        <Figlet Content="PAUSED" Color="@Spectre.Console.Color.Yellow" />
                        <Padder Padding="@(new(0, 1, 0, 0))" />
                        <Align Horizontal="@Spectre.Console.HorizontalAlignment.Center">
                            <Rows>
                                <Panel>
                                    <TextButton
                                    Content="   Resume   "
                                    OnClick="ResumeGame"
                                    BackgroundColor="@Spectre.Console.Color.Grey15"
                                    FocusedColor="@Spectre.Console.Color.Blue"
                                    />
                                </Panel>
                                <Panel>
                                    <TextButton
                                    Content="  Settings  "
                                    OnClick="ShowSettings"
                                    BackgroundColor="@Spectre.Console.Color.Grey15"
                                    FocusedColor="@Spectre.Console.Color.Blue"
                                    />
                                </Panel>
                                <Panel>
                                    <TextButton
                                    Content=" Main Menu  "
                                    OnClick="ReturnToMainMenu"
                                    BackgroundColor="@Spectre.Console.Color.Grey15"
                                    FocusedColor="@Spectre.Console.Color.Blue" />
                                </Panel>
                                <Panel>
                                    <TextButton
                                    Content="    Quit    "
                                    OnClick="ExitApplication"
                                    BackgroundColor="@Spectre.Console.Color.Grey15"
                                    FocusedColor="@Spectre.Console.Color.Blue"
                                    />
                                </Panel>
                            </Rows>
                        </Align>
                    </Rows>
                </Padder>
            </Panel>
        </Align>
    }
}
else
{
    @foreach (var line in lines)
    {
        <Markup Content="@line" />
    }
}